<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>SAGE - Abrir Ordem de Serviço</title>
    <link rel="stylesheet" th:href="@{/css/dashboard-engenheiro-style.css}">
    <style>
        .form-os { padding: 20px; overflow-y: auto; }
        .form-os .form-group { margin-bottom: 1.5rem; }
        .form-os label { display: block; margin-bottom: .5rem; font-weight: 600; color: #495057; }
        .form-os input, .form-os select, .form-os textarea {
            width: 100%; padding: .75rem; font-size: 1rem; border: 1px solid #ced4da; border-radius: .25rem; box-sizing: border-box;
        }
        .form-os input[readonly], .form-os textarea[readonly] { background-color: #e9ecef; }
        .form-os .btn-submit { background-color: #0d6efd; color: white; border: none; padding: 12px 25px; cursor: pointer; font-size: 1rem; border-radius: 5px; }
    </style>
</head>
<body>
<div class="dashboard-container">
    <div th:replace="~{fragments/sidebarEngenheiro :: sidebarEngenheiro}"></div>
    <main class="main-content">
        <div class="content-wrapper">
            <section class="card">
                <h2 class="card-title">RELATÓRIO DE ORDEM DE SERVIÇO</h2>

                <form class="form-os" th:object="${solicitacao}" action="/os/salvar" method="post">
                    <div class="form-group">
                        <label for="equipamento">Equipamento</label>
                        <input type="text" id="equipamento" th:value="*{equipamento()}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="setor">Setor</label>
                        <input type="text" id="setor" th:value="*{setor()}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="descricao">Descrição do Problema</label>
                        <textarea id="descricao" rows="4" th:text="*{descricaoProblema()}" readonly></textarea>
                    </div>

                    <div class="form-group">
                        <label for="prioridade">Prioridade</label>
                        <select id="prioridade" name="prioridade" required>
                            <option value="BAIXA">Baixa</option>
                            <option value="MEDIA" selected>Média</option>
                            <option value="ALTA">Alta</option>
                        </select>
                    </div>

                    <!-- novos: categoria do problema, prazo, observaçoes e um campo pra anexar fotos do equipamento -->
                    <div class="form-group">
                        <label for="categoria">Categoria do Problema</label>
                        <select id="categoria" name="categoria" required>
                            <option value="" disabled selected>Selecione...</option>
                            <option value="ELETRICA">Elétrica</option>
                            <option value="MECANICA" selected>Mecânica</option>
                            <option value="SOFTWARE">Software</option>
                            <option value="CALIBRACAO">Calibração</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="prazo">Prazo Estimado (em dias)</label>
                        <input type="number" id="prazo" name="prazo" min="1">
                    </div>

                    <div class="form-group">
                        <label for="observacoes">Observações Adicionais</label>
                        <textarea id="observacoes" name="observacoes" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="anexo">Anexar Imagem</label>
                        <input type="file" id="anexo" name="anexo">
                    </div>

                    <div class="form-group">
                        <label for="tecnico">Técnico Responsável</label>
                        <select id="tecnico" name="tecnico" required>
                            <option value="" disabled selected>Selecione um técnico...</option>
                            <option th:each="tecnico : ${tecnicos}" th:value="${tecnico}" th:text="${tecnico}"></option>
                        </select>
                    </div>

                    <button type="submit" class="btn-submit">Enviar O.S.</button>
                </form>
            </section>
        </div>
    </main>
</div>
</body>
</html>